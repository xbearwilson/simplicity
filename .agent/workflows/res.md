---
description: 此指令用於指示 Antigravity 代理程式透過「對話紀錄與記憶」立即撤銷當次或最近一次的程式碼異動，而非使用 Git 指令。
---

當使用者輸入 `/res` 時，代理程式應採取以下「精準還原」流程：

1. **搜尋歷史紀錄**：
   - 審閱與分析目前的對話紀錄，找出「異動發生前」的檔案完整內容（通常在 `view_file` 或上一次 `write_to_file` 的輸出中）。

2. **強制覆蓋恢復**：
   - 針對受影響的檔案，直接使用 `write_to_file` 工具，並將 `Overwrite` 設為 `true`，將「原始內容」完整寫回檔案中。
   - 代理程式應確保恢復的內容與異動前百分之百一致，包含排版與註解。

3. **清理與確認**：
   - 檢查是否有多個檔案需要同時還原，務必確保當次任務的所有異動全部撤銷。
   - 完成後向使用者回報：「已根據對話歷史將 [檔案名稱] 恢復至異動前的原始狀態，並未動用 Git 指令執行此動作。」

_註：此工作流的核心在於利用代理程式的「語義上下文記憶」來實現比 Git `restore` 更精準的內容回溯，特別是在使用者不希望動到 Git 索引（Index）或處理單一檔案還原時。_
